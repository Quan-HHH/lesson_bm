<script>
    const p1 = () => {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve(1);
            }, 1000);
        });
    };
    const p2 = () => {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve(1);
            }, 2000);
        });
    };
    const p3 = () => {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve(1);
            }, 3000);
        });
    };
    Promise.myAll = function (promises) {
        let res = []
        return new Promise((resolve, reject) => {
            let count = 0; // 到底完成了几个 count === promises.length
            for (let i = 0; i < promises.length; i++) {
                let p = promises[i];
                p.then((r) => {
                    count++;
                    res[i] = r
                    if (count === promises.length) {
                        resolve(res)
                    }
                }).catch((err) => { });
            }
        })

    };
    Promise.myAll([p1(), p2(), p3()]).then((r) => { 
        console.log(r)
    });
</script>
